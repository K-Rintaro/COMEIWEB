<!DOCTYPE html>
<html lang="en">
<head>
<meta name="description" content="The best tool for learning languages on the web." />
<meta name="google-site-verification" content="siAqJGzdaQ7MnTB4lnBNEDVf4O84vm8mhWyUQeLXftg" />
<meta name="msvalidate.01" content="BB7E82E0E27C1F583149289F2337F283" />
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<link rel="stylesheet" type="text/css" href="googleicon.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="dropify.css">
<link rel="stylesheet" type="text/css" href="roboto.css" >
<link rel="icon" href="comeilogo.ico">
<script src="dropify.js"></script>
<meta charset="utf-8">
<link rel="stylesheet" href="main.css">
<title>COMEI</title>
</head>
<body>
    <div class="font">
        <div class="heyyou">
            <ui>
                <li>
                    <h1>COMEIWEB</h1> 
                </li>
                <li>
                    <h3>The best tool for learning languages on the web.</h3>
                </li>
            </ui>
        </div>
        <div class="chosakuken">
            <p>©️2020 Rintaro Kobayashi</p>
            <div class="GitHub">
                <a href="https://github.com/K-Rintaro" target= "_blank" rel="noopener"> <img src="GitHub.png" alt="GitHubページ" title="GitHubページ"> </a>
            </div>
        </div>
        <div class="kaihatsuchu">
            <div class="blinking">
                <span class="material-icons">
                    error
                </span>
            </div>
            <p>Currently under development. Many features are not available at this time.</p>
        </div>
            <form>
                <p>1. Please upload CSV files.</p>
                <input type="file" class="dropify" id ="output_csv" name="file">
            </form>
            <script>
                $(document).ready(function(){
                    $('.dropify').dropify();
                });
            </script>
            <script>
 // 単語の順番をランダムに並べ替える。
 window.addEventListener('DOMContentLoaded', ()=>{
              const myfile=document.querySelector('#output_csv');
              myfile.addEventListener('change',async e=>{
                var f=e.target.files[0];
                var fr=new FileReader();
                var data=await new Promise((resolve)=>{
                  fr.addEventListener('load',()=>{
                    const content=fr.result;
                    const data=content.split(/[\r\n]+/).map(x=>(y=x.split(","),{spelling:y[0],meaning:y[1]}));
                    resolve(data);
                  });
                  fr.readAsText(f) ;
                });
                console.log(data);
                data.sort (function (a, b) {return Math.floor (Math.random () * 3) - 1 ;}) ;
              });
            });
 
 function Start ()
{
 if (data.length==0)
 {window .alert ("すでに全ての出題が終了しています。") ; return ;}
 
 while (true)
 {
var word = data.shift () ;
 
window .alert ("問題: " + word.spelling) ;
 
if (data.length==0)
 {window .alert ("答え: " + word.meaning + "\n\nこれで全ての出題が終了しました。") ; return ;}
 
if (! window .confirm ("答え: " + word.meaning + "\n\n次へ→[OK] ／ 終了→[キャンセル]")) return ;
}
}
 </script>
</head>
<body>
<form> <button onclick="Start () ;">スタート</button> </form>
</body>

    </div>
</body>
</html>
